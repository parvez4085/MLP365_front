<div class="container-fluid">
  <div class="row mb-4">
    <div class="col-12">
      <div class="page-title-box d-flex justify-content-between align-items-center">
        <h4 class="page-title">Dashboard</h4>
      </div>
    </div>
  </div>

  <div class="alert alert-success">
    <i class="mdi mdi-check-all me-2"></i>
    Welcome <strong>{{ companyName }}</strong>!
  </div>

  <div class="row">
    <div *ngFor="let w of widgets" class="col-md-6 col-xl-4 mb-3">
      <a [routerLink]="w.link">
        <div class="widget-rounded-circle card-box">
          <div class="row">
            <div class="col-6">
              <div class="avatar-lg rounded-circle {{ w.bgClass }} border">
                <i class="{{ w.iconClass }} font-22 avatar-title text-primary"></i>
              </div>
            </div>
            <div class="col-6 text-end">
              <h3 class="text-dark mt-1">{{ w.prefix || '' }}<span>{{ w.count }}</span></h3>
              <p class="text-muted mb-1 text-truncate">{{ w.desc }}</p>
            </div>
          </div>
        </div>
      </a>
    </div>
  </div>

  <div class="row">
    <div class="col-xl-4 mb-3">
      <div class="card-box text-center">
        <h4>Today's Purchase</h4>
        <div class="widget-chart">
          <div class="knob-placeholder">
            {{ todaysPurchaseAmount }}
          </div>
          <h5 class="text-muted mt-3">Total Purchase made today</h5>
          <h2>₹{{ todaysPurchaseAmount }}</h2>
          <p class="text-muted w-75 mx-auto">Purchase Made by today.</p>
        </div>
      </div>
    </div>

    <div class="col-xl-8 mb-3">
      <div class="card-box">
        <h4>Pending Customer Approvals</h4>
        <div class="table-responsive">
          <table class="table table-borderless table-hover mb-0">
            <thead class="thead-light">
              <tr>
                <th>Customer Details</th>
                <th>Date</th>
                <th>Status</th>
                <th>Action</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let c of pendingCustomers">
                <td>
                  <h5 class="mb-0">{{ c.name }}</h5>
                  <p class="mb-0 text-muted"><small>{{ c.mobile }}</small></p>
                </td>
                <td>{{ c.regDate | date:'mediumDate' }}</td>
                <td><span class="badge bg-warning text-dark">Pending Approval</span></td>
                <td>
                  <a [routerLink]="['/customer-profile', c.id]" class="btn btn-xs btn-secondary">
                    <i class="mdi mdi-pencil"></i>
                  </a>
                </td>
              </tr>
              <tr *ngIf="pendingCustomers.length === 0">
                <td colspan="4" class="text-center text-muted">No pending approvals.</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>

  <div class="row mt-4">
    <div class="col-md-8">
      <h4 class="mb-3">Upcoming Renewals</h4>
      <div class="card-box">
        <div class="table-responsive">
          <table class="table table-centered mb-0" style="font-size:12px">
            <thead class="thead-light">
              <tr>
                <th>Sr. No</th><th>Customer Name</th><th>Added Date</th><th>Renewal Date</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let r of renewals; index as i">
                <td>{{ i + 1 }}</td>
                <td>{{ r.name }}</td>
                <td>{{ r.addedDate | date:'shortDate' }}</td>
                <td>{{ r.renewalDate | date:'shortDate' }}</td>
              </tr>
              <tr *ngIf="renewals.length === 0">
                <td colspan="4" class="text-danger text-center">Currently no Renewal available...</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>

    <div class="col-md-8 mt-4">
      <h4 class="mb-3">Account Balance</h4>
      <div class="card-box">
        <div class="table-responsive">
          <table class="table table-centered mb-0" style="font-size:12px">
            <thead class="thead-light">
              <tr><th>Sr.No</th><th>Account Name</th><th class="text-end">Balance</th></tr>
            </thead>
            <tbody>
              <tr *ngFor="let acc of accountBalances; index as i">
                <td>{{ i + 1 }}</td>
                <td>{{ acc.name }}</td>
                <td class="text-end">₹{{ acc.balance }}</td>
              </tr>
              <tr *ngIf="accountBalances.length === 0">
                <td colspan="3" class="text-center text-danger">Currently no data available...</td>
              </tr>
            </tbody>
            <tfoot *ngIf="accountBalances.length">
              <tr class="fw-bold text-danger">
                <td></td><td>Total:</td>
                <td class="text-end">₹{{ totalBalance }}</td>
              </tr>
            </tfoot>
          </table>
        </div>
      </div>
    </div>
  </div>
</div>
